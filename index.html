<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Khush Pindoria</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Define CSS variables for light (default) mode */
    :root {
      --bg-gradient: linear-gradient(45deg, #f0f0f0, #dfdfdf, #cccccc, #acacac);
      --code-color: rgba(0, 0, 0, 0.5);
      --hero-text-color: #000;
      --icon-color: #000;
    }
    /* Override for dark mode */
    .dark {
      --bg-gradient: linear-gradient(45deg, #000d25, #000816, #00143a, #001742);
      --code-color: rgba(255, 255, 255, 0.3);
      --hero-text-color: #fff;
      --icon-color: #fff;
    }
    /* Global Animated Gradient Background using variable */
    .global-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
      background: var(--bg-gradient);
      background-size: 400% 400%;
      animation: gradientAnimation 30s ease infinite;
      filter: blur(0.5px);
    }
    @keyframes gradientAnimation {
      0% { background-position: 0% 50%; }
      25% { background-position: 100% 50%; }
      50% { background-position: 100% 0%; }
      75% { background-position: 0% 100%; }
      100% { background-position: 0% 50%; }
    }
    /* Noise overlays to reduce banding */
    .global-bg::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://www.transparenttextures.com/patterns/asfalt-dark.png');
      opacity: 0.2;
      pointer-events: none;
      filter: blur(1px);
    }
    .global-bg::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://www.transparenttextures.com/patterns/pw_maze_white.png');
      opacity: 0.05;
      pointer-events: none;
    }
    /* Global Codes Container for floating snippets */
    #global-codes {
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
      overflow: hidden;
    }
    /* Floating code snippet style using variable */
    .floating-code {
      position: absolute;
      font-family: 'Courier New', Courier, monospace;
      font-size: 0.8rem;
      color: var(--code-color);
      opacity: 0.8;
      animation: floatCode 10s ease-in-out infinite;
      transition: top 10s linear, left 10s linear, opacity 2s ease-in-out;
    }
    @keyframes floatCode {
      0% { transform: translate(0, 0); }
      50% { transform: translate(10px, -10px); }
      100% { transform: translate(0, 0); }
    }
    /* Smooth scrolling */
    html { scroll-behavior: smooth; }
    /* Custom cursor */
    body {
      cursor: url('https://img.icons8.com/?id=DzDNJborQlTB'), auto;
    }
    /* Fade-in transition for sections */
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }
    /* Modal styling */
    .modal {
      position: fixed;
      inset: 0;
      z-index: 100;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.75);
    }
    /* Button hover microinteraction */
    button {
      transition: transform 0.2s ease-in-out;
    }
    button:hover {
      transform: scale(1.05);
    }
    /* Hero content text and icon styling using variables */
    .hero-content {
      color: var(--hero-text-color);
    }
    .icon {
      fill: var(--icon-color);
    }
  </style>
</head>
<body class="text-gray-50">

  <!-- Audio element for click sound -->
  <audio id="clickSound" src="https://www.myinstants.com/media/sounds/pisseim-mund-online-audio-converter.mp3" preload="auto"></audio>

  <!-- Dark Mode Toggle -->
  <div class="fixed top-4 right-4 z-50">
    <button id="darkModeToggle" class="bg-gray-800 text-white p-2 rounded-full hover:bg-gray-700 transition-colors">â˜€</button>
  </div>

  <!-- Feedback Widget -->
  <div class="fixed bottom-4 right-4 z-50">
    <button id="feedbackBtn" class="bg-blue-500 text-white p-3 rounded-full shadow-lg hover:bg-blue-600 transition-colors">Feedback</button>
  </div>

  <!-- Global Background -->
  <div class="global-bg"></div>

  <!-- Global Codes Container -->
  <div id="global-codes"></div>

  <!-- Hero Section with Navigation and Social Icons -->
  <section class="relative min-h-screen flex flex-col items-center justify-center text-center px-4 fade-in" data-parallax-speed="0.05">
    <div class="relative z-10 max-w-3xl mx-auto py-16 hero-content">
      <h1 class="text-5xl md:text-7xl font-extrabold mb-4">Khush Pindoria</h1>
      <p class="text-xl md:text-2xl mb-8">Photographer | AI &amp; Cybersecurity Enthusiast | Builder</p>
      <!-- Navigation Links -->
      <nav class="flex flex-wrap justify-center space-x-4 text-lg mb-4">
        <a href="#photography" class="hover:text-gray-500 transition-colors">Photography</a>
        <span>|</span>
        <a href="#projects" class="hover:text-gray-500 transition-colors">Projects</a>
        <span>|</span>
        <a href="#about" class="hover:text-gray-500 transition-colors">About</a>
        <span>|</span>
        <a href="#contact" class="hover:text-gray-500 transition-colors">Contact</a>
      </nav>
      <!-- Social Icons Under Navigation -->
      <div class="flex justify-center gap-6 mb-8">
        <!-- LinkedIn -->
        <div class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-300 transition">
          <a href="https://www.linkedin.com/in/khush-pindoria-176884189" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 icon" viewBox="0 0 50 50">
              <path d="M41,4H9C6.24,4,4,6.24,4,9v32c0,2.76,2.24,5,5,5h32c2.76,0,5-2.24,5-5V9C46,6.24,43.76,4,41,4z M17,20v19h-6V20H17z M11,14.47c0-1.4,1.2-2.47,3-2.47s2.93,1.07,3,2.47c0,1.4-1.12,2.53-3,2.53C12.2,17,11,15.87,11,14.47z M39,39h-6c0,0,0-9.26,0-10 c0-2-1-4-3.5-4.04h-0.08C27,24.96,26,27.02,26,29c0,0.91,0,10,0,10h-6V20h6v2.56c0,0,1.93-2.56,5.81-2.56 c3.97,0,7.19,2.73,7.19,8.26V39z"/>
            </svg>
          </a>
        </div>
        <!-- Instagram -->
        <div class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-300 transition">
          <a href="https://instagram.com/kpfotografy" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 icon" viewBox="0 0 50 50">
              <path d="M16,3c-7.17,0 -13,5.83 -13,13v18c0,7.17 5.83,13 13,13h18c7.17,0 13,-5.83 13,-13v-18c0,-7.17 -5.83,-13 -13,-13zM37,11c1.1,0 2,0.9 2,2c0,1.1 -0.9,2 -2,2c-1.1,0 -2,-0.9 -2,-2c0,-1.1 0.9,-2 2,-2zM25,14c6.07,0 11,4.93 11,11c0,6.07 -4.93,11 -11,11c-6.07,0 -11,-4.93 -11,-11c0,-6.07 4.93,-11 11,-11zM25,16c-4.96,0 -9,4.04 -9,9c0,4.96 4.04,9 9,9c4.96,0 9,-4.04 9,-9c0,-4.96 -4.04,-9 -9,-9z"/>
            </svg>
          </a>
        </div>
        <!-- Facebook -->
        <div class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-300 transition">
          <a href="https://facebook.com/kpfotografy" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 icon" viewBox="0 0 50 50">
              <path d="M25,3C12.85,3,3,12.85,3,25c0,11.03,8.125,20.137,18.712,21.728V30.831h-5.443v-5.783h5.443v-3.848c0-6.371,3.104-9.168,8.399-9.168c2.536,0,3.877,0.188,4.512,0.274v5.048h-3.612c-2.248,0-3.033,2.131-3.033,4.533v3.161h6.588l-0.894,5.783h-5.694v15.944C38.716,45.318,47,36.137,47,25C47,12.85,37.15,3,25,3z"/>
            </svg>
          </a>
        </div>
        <!-- Discord -->
        <div class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-300 transition">
          <a href="https://discord.gg/ux8QhxJFxj" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 icon" viewBox="0 0 50 50">
              <path d="M41.625,10.76953c-3.98047,-3.20313 -10.27734,-3.74609 -10.54687,-3.76563c-0.41797,-0.03516 -0.81641,0.19922 -0.98828,0.58594c-0.01562,0.02344 -0.15234,0.33984 -0.30469,0.83203c2.63281,0.44531 5.86719,1.33984 8.79297,3.15625c0.46875,0.28906 0.61328,0.90625 0.32422,1.375c-0.19141,0.30859 -0.51562,0.47656 -0.85156,0.47656c-0.17969,0 -0.36328,-0.05078 -0.52734,-0.15234c-5.03125,-3.12109 -11.3125,-3.27734 -12.52344,-3.27734c-1.21094,0 -7.49609,0.15625 -12.52344,3.27734c-0.46875,0.29297 -1.08594,0.14844 -1.375,-0.32031c-0.29297,-0.47266 -0.14844,-1.08594 0.32031,-1.37891c2.92578,-1.8125 6.16016,-2.71094 8.79297,-3.15234c-0.15234,-0.49609 -0.28906,-0.80859 -0.30078,-0.83594c-0.17578,-0.38672 -0.57031,-0.62891 -0.99219,-0.58594c-0.26953,0.01953 -6.56641,0.5625 -10.60156,3.80859c-2.10547,1.94922 -6.32031,13.33984 -6.32031,23.1875c0,0.17578 0.04688,0.34375 0.13281,0.49609c2.90625,5.10938 10.83984,6.44531 12.64844,6.50391c0.00781,0 0.01953,0 0.03125,0c0.32031,0 0.62109,-0.15234 0.80859,-0.41016l1.82813,-2.51562c-4.93359,-1.27344 -7.45312,-3.4375 -7.59766,-3.56641c-0.41406,-0.36328 -0.45312,-0.99609 -0.08594,-1.41016c0.36328,-0.41406 0.99609,-0.45312 1.41016,-0.08984c0.05859,0.05469 4.69922,3.99219 13.82422,3.99219c9.14063,0 13.78125,-3.95312 13.82813,-3.99219c0.41406,-0.35937 1.04297,-0.32422 1.41016,0.09375c0.36328,0.41406 0.32422,1.04297 -0.08984,1.40625c-0.14453,0.12891 -2.66406,2.29297 -7.59766,3.56641l1.82813,2.51563c0.1875,0.25781 0.48828,0.41016 0.80859,0.41016c0.01172,0 0.02344,0 0.03125,0c1.80859,-0.05859 9.74219,-1.39453 12.64844,-6.50391c0.08594,-0.15234 0.13281,-0.32031 0.13281,-0.49609c0,-9.84766 -4.21484,-21.23828 -6.375,-23.23047zM18.5,30c-1.93359,0 -3.5,-1.78906 -3.5,-4c0,-2.21094 1.56641,-4 3.5,-4c1.93359,0 3.5,1.78906 3.5,4C22,28.21,20.43,30,18.5,30zM31.5,30c-1.93359,0 -3.5,-1.78906 -3.5,-4c0,-2.21094 1.56641,-4 3.5,-4c1.93359,0 3.5,1.78906 3.5,4C35,28.21,33.43,30,31.5,30z"/>
            </svg>
          </a>
        </div>
        <!-- GitHub -->
        <div class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-600 transition">
          <a href="https://github.com/khushpindoria" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 icon" viewBox="0 0 50 50">
              <path d="M17.791,46.836C18.502,46.53,19,45.823,19,45v-5.4c0-0.197,0.016-0.402,0.041-0.61C19.027,38.994,19.014,38.997,19,39 c0,0-3,0-3.6,0c-1.5,0-2.8-0.6-3.4-1.8c-0.7-1.3-1-3.5-2.8-4.7C8.9,32.3,9.1,32,9.7,32c0.6,0.1,1.9,0.9,2.7,2c0.9,1.1,1.8,2,3.4,2 c2.487,0,3.82-0.125,4.622-0.555C21.356,34.056,22.649,33,24,33v-0.025c-5.668-0.182-9.289-2.066-10.975-4.975 c-3.665,0.042-6.856,0.405-8.677,0.707c-0.058-0.327-0.108-0.656-0.151-0.987c1.797-0.296,4.843-0.647,8.345-0.714 c-0.112-0.276-0.209-0.559-0.291-0.849c-3.511-0.178-6.541-0.039-8.187,0.097c-0.02-0.332-0.047-0.663-0.051-0.999 c1.649-0.135,4.597-0.27,8.018-0.111c-0.079-0.5-0.13-1.011-0.13-1.543c0-1.7,0.6-3.5,1.7-5c-0.5-1.7-1.2-5.3,0.2-6.6 c2.7,0,4.6,1.3,5.5,2.1C21,13.4,22.9,13,25,13s4,0.4,5.6,1.1c0.9-0.8,2.8-2.1,5.5-2.1c1.5,1.4,0.7,5,0.2,6.6c1.1,1.5,1.7,3.2,1.6,5 c0,0.484-0.045,0.951-0.11,1.409c3.499-0.172,6.527-0.034,8.204,0.102c-0.002,0.337-0.033,0.666-0.051,0.999 c-1.671-0.138-4.775-0.28-8.359-0.089c-0.089,0.336-0.197,0.663-0.325,0.98c3.546,0.046,6.665,0.389,8.548,0.689 c-0.043,0.332-0.093,0.661-0.151,0.987c-1.912-0.306-5.171-0.664-8.879-0.682C35.112,30.873,31.557,32.75,26,32.969V33 c2.6,0,5,3.9,5,6.6V45c0,0.823,0.498,1.53,1.209,1.836C41.37,43.804,48,35.164,48,25C48,12.318,37.683,2,25,2S2,12.318,2,25 C2,35.164,8.63,43.804,17.791,46.836z"/>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Photography Section -->
  <section id="photography" class="py-20 px-4 fade-in" data-parallax-speed="0.05">
    <div class="max-w-4xl mx-auto rounded-lg p-8 shadow-lg text-black dark:text-white bg-white/70 dark:bg-black/50 backdrop-blur-md">
      <h2 class="text-3xl font-bold mb-6 text-center">KPFotografy - Photography</h2>
      <p class="text-center mb-8">A showcase of my photography works.</p>
      <div class="photography-grid grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        <!-- Dynamic event tiles will be injected here -->
      </div>
    </div>
  </section>


  <!-- Projects Section -->
  <section id="projects" class="py-20 px-4 fade-in" data-parallax-speed="0.05">
    <div class="max-w-4xl mx-auto rounded-lg p-8 shadow-lg text-black dark:text-white bg-white/70 dark:bg-black/50 backdrop-blur-md">
      <h2 class="text-3xl font-bold mb-6 text-center">Projects</h2>
      <p class="text-center mb-8">My work in AI, cybersecurity, and automation.</p>
      <div class="space-y-8">
        <div class="bg-gray-50/90 dark:bg-gray-800/90 p-6 rounded-lg shadow-md">
          <h3 class="text-2xl font-bold mb-2">Project Title</h3>
          <p>Brief description of the project. 
            <a href="#" class="text-blue-600 dark:text-blue-300 hover:underline">Learn more</a>
          </p>
        </div>
        <div class="bg-gray-50/90 dark:bg-gray-800/90 p-6 rounded-lg shadow-md">
          <h3 class="text-2xl font-bold mb-2">Project Title</h3>
          <p>Brief description of the project. 
            <a href="#" class="text-blue-600 dark:text-blue-300 hover:underline">Learn more</a>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="py-20 px-4 fade-in" data-parallax-speed="0.05">
    <div class="max-w-4xl mx-auto rounded-lg p-8 shadow-lg text-black dark:text-white bg-white/70 dark:bg-black/50 backdrop-blur-md">
      <h2 class="text-3xl font-bold mb-6 text-center">About Me</h2>
      <p class="text-center mb-8">A brief bio about myself, my journey, and my skills.</p>
      <div class="bg-gray-50/90 dark:bg-gray-800/90 p-6 rounded-lg shadow-md">
        <p>I'm Khush Pindoria, a cybersecurity professional and AI enthusiast dedicated to transforming security operations through AI, automation, and machine learning. I lead innovative projects integrating AI to enhance threat detection, streamline workflows, and reduce false positives. Beyond cybersecurity, I run KPFotografy, capturing moments with a minimalist yet artistic approach. Let's connect and see what we can build together!</p>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="py-20 px-4 fade-in" data-parallax-speed="0.05">
    <!-- Added id="contactForm" -->
    <div class="max-w-4xl mx-auto rounded-lg p-8 shadow-lg text-black dark:text-white bg-white/70 dark:bg-black/50 backdrop-blur-md">
      <h2 class="text-3xl font-bold mb-6 text-center">Contact</h2>
      <p class="text-center mb-8">Get in touch with me for inquiries or collaborations.</p>
      <form id="contactForm" class="space-y-4 max-w-xl mx-auto">
        <div>
          <label for="name" class="block mb-1">Name</label>
          <input type="text" id="name" class="w-full p-3 rounded border bg-gray-50/90 dark:bg-gray-800/90 text-black dark:text-white" placeholder="Your Name">
        </div>
        <div>
          <label for="email" class="block mb-1">Email</label>
          <input type="email" id="email" class="w-full p-3 rounded border bg-gray-50/90 dark:bg-gray-800/90 text-black dark:text-white" placeholder="you@example.com">
        </div>
        <div>
          <label for="message" class="block mb-1">Message</label>
          <textarea id="message" rows="5" class="w-full p-3 rounded border bg-gray-50/90 dark:bg-gray-800/90 text-black dark:text-white" placeholder="Your message"></textarea>
        </div>
        <button type="submit" class="w-full bg-blue-500 dark:bg-blue-600 text-white p-3 rounded hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors">
          Send Message
        </button>
      </form>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-8 text-center fade-in text-black dark:text-white">
    <p class="text-sm">&copy; 2025 Khush Pindoria. All rights reserved.</p>
  </footer>

  <!-- Lightbox Modal -->
  <div id="lightbox-modal" class="modal" onclick="this.style.display='none'">
    <img id="lightbox-img" src="" alt="Large view" class="max-w-full max-h-full">
  </div>

  <!-- Feedback Modal -->
  <div id="feedback-modal" class="modal">
    <div class="bg-gray-800 p-6 rounded-lg relative w-11/12 sm:w-1/2">
      <!-- Added id="feedbackForm" -->
      <button id="feedbackClose" class="absolute top-2 right-2 text-white text-xl">&times;</button>
      <h2 class="text-2xl mb-4">Feedback</h2>
      <form id="feedbackForm" class="space-y-4">
        <div>
          <label for="feedbackName" class="block mb-1">Name</label>
          <input type="text" id="feedbackName" class="w-full p-3 rounded border bg-gray-700 text-white" placeholder="Your Name">
        </div>
        <div>
          <label for="feedbackMessage" class="block mb-1">Feedback</label>
          <textarea id="feedbackMessage" rows="4" class="w-full p-3 rounded border bg-gray-700 text-white" placeholder="Your feedback"></textarea>
        </div>
        <button type="submit" class="w-full bg-blue-500 dark:bg-blue-600 text-white p-3 rounded hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors">
          Submit
        </button>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Dark Mode Toggle
    const darkModeToggle = document.getElementById("darkModeToggle");
    darkModeToggle.addEventListener("click", function() {
      document.documentElement.classList.toggle("dark");
      darkModeToggle.textContent = document.documentElement.classList.contains("dark") ? "â˜€" : "ðŸŒ™";
    });

    // Play click sound on button click
    const clickSound = document.getElementById("clickSound");
    document.querySelectorAll("button").forEach(button => {
      button.addEventListener("click", () => {
        clickSound.currentTime = 0;
        clickSound.play();
      });
    });

    // Fade-in on scroll (Intersection Observer)
    const faders = document.querySelectorAll('.fade-in');
    const appearOptions = { threshold: 0.2, rootMargin: "0px 0px -50px 0px" };
    const appearOnScroll = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      });
    }, appearOptions);
    faders.forEach(fader => { appearOnScroll.observe(fader); });

    // Parallax effect
    window.addEventListener('scroll', () => {
      const scrolled = window.pageYOffset;
      document.querySelectorAll('[data-parallax-speed]').forEach(el => {
        const speed = el.getAttribute('data-parallax-speed') || 0.05;
        el.style.transform = `translateY(${scrolled * speed}px)`;
      });
    });

    // Lightbox for Photography
    const lightboxModal = document.getElementById("lightbox-modal");
    const lightboxImg = document.getElementById("lightbox-img");
    document.querySelectorAll('.lightbox-img').forEach(img => {
      img.addEventListener('click', function() {
        lightboxImg.src = this.src;
        lightboxModal.style.display = "flex";
      });
    });

    // Global Floating Code Snippets with improved distribution using a 20x20 grid (5% increments)
    const globalCodesContainer = document.getElementById("global-codes");
    const snippetTexts = [
      "&lt;div&gt;Hello World&lt;/div&gt;",
      "console.log('Debugging...');",
      "if(user){ return true; }",
      "stop();",
      "function init(){ /* ... */ }",
      "const data = fetchData();",
      "let x = 42;",
      "for(let i=0;i<10;i++){ console.log(i); }"
    ];
    const numSnippets = 15;
    
    // Generate a grid of possible positions with 5% increments (0%, 5%, 10%, ... 95%)
    const positions = [];
    for (let top = 0; top < 20; top++) {
      for (let left = 0; left < 20; left++) {
        positions.push({ top: top * 5, left: left * 5 });
      }
    }
    // Shuffle positions using Fisher-Yates
    for (let i = positions.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [positions[i], positions[j]] = [positions[j], positions[i]];
    }
    
    // Assign first numSnippets positions to our code snippets
    for (let i = 0; i < numSnippets; i++) {
      const snippetEl = document.createElement("div");
      snippetEl.classList.add("floating-code");
      snippetEl.innerHTML = snippetTexts[Math.floor(Math.random() * snippetTexts.length)];
      const pos = positions[i];
      snippetEl.style.top = pos.top + "%";
      snippetEl.style.left = pos.left + "%";
      globalCodesContainer.appendChild(snippetEl);
    }
    
    // Update global snippets smoothly every 30 seconds
    setInterval(() => {
      globalCodesContainer.querySelectorAll('.floating-code').forEach(el => {
        el.style.opacity = 0;
        setTimeout(() => {
          el.innerHTML = snippetTexts[Math.floor(Math.random() * snippetTexts.length)];
          const newPos = positions[Math.floor(Math.random() * positions.length)];
          el.style.top = newPos.top + "%";
          el.style.left = newPos.left + "%";
          el.style.opacity = 0.8;
        }, 2000);
      });
    }, 30000);

    // --- Step 2: Integrate Contact & Feedback Form Submission using Cloudflare Worker & SendGrid ---
    // Replace this URL with your actual Cloudflare Worker endpoint URL.
    const workerEndpoint = "https://sendemail.khush23.workers.dev";

    // Contact Form Submission
    const contactForm = document.getElementById("contactForm");
    if (contactForm) {
      contactForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const name = document.getElementById("name").value.trim();
        const email = document.getElementById("email").value.trim();
        const message = document.getElementById("message").value.trim();
        if (!name || !email || !message) {
          alert("Please fill out all fields.");
          return;
        }
        try {
          const res = await fetch(workerEndpoint, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ name, email, message })
          });
          if (!res.ok) {
            const errText = await res.text();
            alert("Error sending message: " + errText);
            return;
          }
          alert("Message sent! Thank you.");
          contactForm.reset();
        } catch (err) {
          console.error(err);
          alert("An error occurred. Please try again later.");
        }
      });
    }

    // Feedback Form Submission
    const feedbackForm = document.getElementById("feedbackForm");
    if (feedbackForm) {
      feedbackForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const name = document.getElementById("feedbackName").value.trim();
        const message = document.getElementById("feedbackMessage").value.trim();
        if (!name || !message) {
          alert("Please fill out all fields.");
          return;
        }
        try {
          const res = await fetch(workerEndpoint, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            // Here we send feedback data. You could add a type field if needed.
            body: JSON.stringify({ name, email: "N/A", message: "Feedback: " + message })
          });
          if (!res.ok) {
            const errText = await res.text();
            alert("Error sending feedback: " + errText);
            return;
          }
          alert("Feedback sent! Thank you.");
          feedbackForm.reset();
        } catch (err) {
          console.error(err);
          alert("An error occurred. Please try again later.");
        }
      });
    }

    // Feedback Modal Toggle (existing code)
    const feedbackBtn = document.getElementById("feedbackBtn");
    const feedbackModal = document.getElementById("feedback-modal");
    const feedbackClose = document.getElementById("feedbackClose");
    feedbackBtn.addEventListener("click", () => { feedbackModal.style.display = "flex"; });
    feedbackClose.addEventListener("click", () => { feedbackModal.style.display = "none"; });
    feedbackModal.addEventListener("click", (e) => {
      if (e.target === feedbackModal) { feedbackModal.style.display = "none"; }
    });


    // Replace with your actual Cloudflare Worker endpoint URL.
    const eventsEndpoint = 'https://gd.khush23.workers.dev';
    let allEvents = [];        // will hold your full array
    let renderedCount = 0;     // how many tiles we've injected so far
    const BATCH_SIZE = 6;      // how many to show at once
  
    async function loadEvents() {
      try {
        const res  = await fetch(eventsEndpoint);
        allEvents   = await res.json();
        renderedCount = 0;
        renderNextBatch();
  
        // if there's more to show, insert the View More button
        if (allEvents.length > BATCH_SIZE) {
          addViewMoreButton();
        }
      } catch (error) {
        console.error('Error loading events:', error);
      }
    }
  
    function renderNextBatch() {
      const container = document.querySelector('.photography-grid');
      // take the next slice
      const slice = allEvents.slice(renderedCount, renderedCount + BATCH_SIZE);
  
      slice.forEach(eventItem => {
        const tile = document.createElement('div');
        tile.className = "tile cursor-pointer rounded-lg shadow-md overflow-hidden";
  
        // you can add a tiny spinner or skeleton class here before image loads
        const img = document.createElement('img');
        img.loading = 'lazy'; // native lazyâ€load
        img.src     = eventItem.coverPhotoUrl || 'placeholder.jpg';
        img.alt     = eventItem.title;
        img.className = "h-48 w-full object-cover";
  
        const caption = document.createElement('h3');
        caption.textContent = eventItem.title;
        caption.className = "p-4 text-center text-lg font-bold";
  
        tile.append(img, caption);
        container.appendChild(tile);
      });
  
      renderedCount += slice.length;
    }
  
    function addViewMoreButton() {
    if (document.getElementById('viewMoreBtn')) return;
  
    // wrap in a flex container
    const wrapper = document.createElement('div');
    wrapper.className = 'flex justify-center mt-6';
  
    const btn = document.createElement('button');
    btn.id = 'viewMoreBtn';
    btn.textContent = 'View More';
    btn.className = 'px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition';
  
    wrapper.appendChild(btn);
    document.querySelector('#photography .max-w-4xl').appendChild(wrapper);
  
    btn.addEventListener('click', () => {
      renderNextBatch();
      if (renderedCount >= allEvents.length) {
        wrapper.remove();
      }
    });
    }

  
    document.addEventListener('DOMContentLoaded', loadEvents);
  </script>
</body>
</html>
